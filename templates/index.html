<!doctype html>
<html lang="cs">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Domov</title>
    <meta name="description" content="Jednoduchá HTML5 šablona pro route '/'">
    <link rel="icon" href="/static/images/favicon.ico">
    <link rel="stylesheet" href="/static/styles.css">
    <style>
      html,body{height:100%;margin:0;font-family:Segoe UI,Roboto,Arial,sans-serif;background:#f7fafc;color:#222}
      .wrap{max-width:900px;margin:32px auto;padding:20px}
      header{display:flex;align-items:center;justify-content:space-between}
      header .brand{display:flex;align-items:center;gap:12px}
      .hero{background:#fff;padding:20px;border-radius:8px;box-shadow:0 1px 3px rgba(0,0,0,0.06)}
      h1{margin:0 0 10px;font-size:1.5rem}
      p{margin:0 0 12px;color:#4a5568}
      footer{margin-top:20px;color:#718096;font-size:.9rem;text-align:center}
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <div class="brand">
          <img src="/static/images/logo.svg" alt="Logo" style="height:40px;" onerror="this.style.display='none'">
          <div>
            <strong>Moje aplikace</strong>
            <div style="font-size:.85rem;color:#718096">Jednoduchá ukázková stránka</div>
          </div>
        </div>
        <nav>
          <a href="/">Domů</a>
        </nav>
      </header>

      <main class="hero">
        <h1>Vítejte</h1>
        <!-- Kontejner stromku s dynamicky generovanými překryvy -->
        <div class="tree-wrap" style="position:relative;max-width:420px;margin:12px 0;border-radius:8px;overflow:hidden;">
          <!-- Hlavní obrazek stromku -->
          <img id="tree-image" src="/static/images/tree.jpg" alt="Stromek" style="width:100%;display:block;" onerror="this.style.display='none'">
          <!-- Překryvné vrstvy generované z Pythonu -->
          {% for overlay in overlays %}
          <img class="overlay" data-key="{{ overlay.key }}" src="/static/images/{{ overlay.key }}.png" alt="{{ overlay.label }}" style="position:absolute;top:0;left:0;width:100%;height:auto;pointer-events:none;" onerror="this.style.display='none'">
          {% endfor %}
        </div>
        
        <!-- Formulář s checkboxy pro "volby" (hodnoty mapují na soubory overlay) -->
        <form method="get" action="/" style="margin-top:16px;">
          <fieldset style="border:1px solid #e2e8f0;padding:12px;border-radius:6px">
            <legend style="font-weight:bold">Vyberte ozdoby (volby)</legend>
            <label style="display:block;margin:6px 0"><input type="checkbox" name="volby" value="candles"> svíčky</label>
            <label style="display:block;margin:6px 0"><input type="checkbox" name="volby" value="chain"> řetěz</label>
            <label style="display:block;margin:6px 0"><input type="checkbox" name="volby" value="balls"> koule</label>
            <button type="submit" style="margin-top:8px;padding:8px 12px;border-radius:6px;border:1px solid #cbd5e1;background:#fff;cursor:pointer">Odeslat (GET)</button>
          </fieldset>
        </form>

        <!-- Zobrazení vybraných hodnot -->
        {% if selected %}
          <div style="margin-top:14px;padding:12px;background:#ffffff;border-radius:6px;box-shadow:0 1px 2px rgba(0,0,0,0.04)">
            <strong>Vybráno:</strong>
            <ul style="margin:8px 0 0 18px;color:#2d3748">
              {% for item in selected %}
                <li>{{ item }}</li>
              {% endfor %}
            </ul>
          </div>
        {% endif %}
        
        <script>
          // Script: aktualizuje checkboxy podle query string
          document.addEventListener('DOMContentLoaded', function () {
            const params = new URLSearchParams(window.location.search);
            const selected = params.getAll('volby');
            if (selected.length) {
              document.querySelectorAll('input[name="volby"]').forEach(cb => {
                cb.checked = selected.includes(cb.value);
              });
            }
          });
        </script>
      </main>

      <footer>
        &copy; 2026 — Všechna práva vyhrazena.
      </footer>
    </div>
  </body>
</html>
